
<!-- saved from url=(0116)https://blackboard.case.edu/bbcswebdav/pid-898861-dt-content-rid-1736411_1/courses/eecs345_hsc21_1/part1%281%29.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

<title>EECS 345: Interpreter Project, Part 1</title>
</head>

<body>
<h2>EECS 345: Programming Language Concepts</h2>
<h2>Interpreter Project, Part 1</h2>
<h3>Due Sunday, February 24</h3>

<p><em>For this and all Interpreter Project's, you are strongly encouraged, but not required, to work in a team of two.  
Those working in a team will have a little extra expected from those working solo, but it should end up being less work
individually for a team than for a solo programmer, and you will end up with a nicer final language.
There is no extra credit provided for solo programmers who decide 
to implement the extra work given to the teams.</em></p>

<p>In this homework, you are to create an interpreter for a very simple Java/C-ish language.
The language has variables, assignment statements, mathematical expressions, comparison
operators, simple if statements, and return statements. </p>

<p>An example program is as follows:
</p><pre>var x;
x = 10;
var y = 3 * x * 5;
if (x &gt; y)
  return x;
else if (x * x &gt; y)
  return x * x;
else if (x * (x + x) &gt; y)
  return x * (x + x);
else 
  return y - 1;  
</pre>
<p></p>

<p>Note that braces, <tt>{</tt> and <tt>}</tt>, are not implemented. </p>

<p><strong>For students working on their own:</strong> The following mathematical operations
are implemented : <tt>+, -, *, /, %</tt> (including the unary <tt>-</tt>), and the following comparison operators are implemented:
<tt>==, !=, &lt;, &gt;, &lt;=. &gt;=</tt>. Variables only store values of type <tt>int</tt>.  Assignment operators do not return values (and so cannot appear in expressions).</p>

<p><strong>For students working in teams of two:</strong> You will do everything that the solo students do plus
the boolean operators <tt>&amp;&amp;, ||, !</tt> and values <tt>true</tt> and <tt>false</tt>.  Variables may now store boolean or int values.
(You do not have to detect an error if a program uses a type incorrectly, but it is not hard to add the error check.)  Also, assignment statements now can
return a value so nested assignments and assignments inside expressions are legal:
</p><pre>var x;
var y;
x = y = 10;
if ((x = x + 1) &gt; y)
  return x;
else
  return y;
</pre>
Note that you do not have to implement short-circuit evaluation of <tt>&amp;&amp;</tt> or <tt>||</tt>.<p></p>

<p><strong>General guidelines</strong></p>

<p>You are to write your interpreter in Scheme using the functional programming style <strong>with one exception</strong>.  For full
marks, you should not use variables <strong>with one exception</strong>, but only functions and parameters.  <strong>The one exception:</strong> you may use a Scheme <em>let</em>
statement with a single variable to handle the assignment operator both updating the environment and returning a value.</p>

<p>A parser is provided
for you called <tt>verySimpleParser.scm</tt>.  You will also
have to get the file <tt>lex.scm</tt>. 
You can use the parser in your program by including the line <tt>(load "verySimpleParser.scm")</tt> at the top of your homework file.  The command assumes <tt>verySimpleParser.scm</tt> is in
the same directory as your homework file.  If it is not, you will have to include the path
to the file in the load command.</p>

<p>  To
use the parser, type the code into a file, and call <tt>(parser "<em>filename</em>")</tt>.  The
parser will return the parse tree in list format.  For example, the parse tree of the above 
code is: <br>
<tt>
((var x) (= x 10) (var y (* (* 3 x) 5)) (if (&gt; x y) (return x) (if (&gt; (* x x) y) (return (* x x)) (if (&gt; (* x (+ x x)) y) (return (* x (+ x x))) (return (- y 1))))))
</tt></p>

<p>Formally, a parse tree is a list where each sublist corresponds to a statement.  The different statements are:
<table>
<tbody><tr><td>variable declaration</td> <td><tt>(var </tt> <em>variable</em><tt>)</tt> or <tt>(var </tt> <em>variable value</em><tt>)</tt></td> </tr>
<tr><td>assignment</td> <td><tt>(= </tt><em>variable</em> <em>expression</em><tt>)</tt></td></tr>
<tr><td>return</td> <td><tt>(return </tt><em>expression</em><tt>)</tt></td>
</tr><tr><td>if statement</td> <td><tt>(if (</tt><em>conditional</em><tt>) <em>then-statement</em> <em>optional-else-statement</em><tt>)</tt></tt></td></tr></tbody></table>
</p>
<p>You should write a function called <tt>interpret</tt> that takes a filename, calls <tt>parser</tt>
with the filename, evaluates the parse tree returned by <tt>parser</tt>, and returns the
proper value. 
You are to maintain
an environment for the variables and return an error message if the user attempts to use a variable 
before it is declared.  You can use the Scheme function <tt>(error ...)</tt> to return the error.</p>

<p><strong>Environment</strong></p>

<p>For this assignment, a simple environment is sufficient.  Make your environment a list of binding pairs.  For example: <tt>((x 5) (y 12) ...)</tt>.  
The exact way you decide to implement looking up a binding, creating a new binding, or updating an existing binding is up to you.  It is not essential that you
be efficient here, just do something that works.  With such a simple language, an efficient environment is unneeded.</p>

<p>What you <em>do</em> have to do is use abstraction to separate your environment from the rest of your interpreter.  As we increase the number of language features we have in future parts 
of the project, we will need to change how the environment is implemented.  If you correctly use abstraction, you will be able to redesign the environment without changing the implementation
of your interpreter.  In this case, that means that the interpreter does not know about the structure of the environment.  Instead, you have generic functions that the interpreter can call
to manipulate the environment.</p>

<p><strong>Finally...</strong></p>
<p>If you are using DrRacket, you will probably need to change the language to one of the more advanced teaching
languages (if you want more descriptive error messages).  The language "Pretty Big" will work, but it does not give
very informative error messages.</p>

<p>Please save your interpreter as a Scheme file with the <tt>.scm</tt> extension. </p>




</body></html>